<!DOCTYPE html>
<html>
<head>
  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
	<title>Halaman Pendaftaran</title>
	<link rel="stylesheet" type="text/css" href="registration_form.css">
</head>
<body>
    <form id="registration-form" action="register.php" method="POST">
        <h2>Registrasi Akun Baru</h2>
        <div class="jenis-akun">
          <label for="category">Jenis Pendaftaran:</label>
          <div>
            <label for="mahasiswa">Mahasiswa</label>
            <input type="radio" id="mahasiswa" name="category" value="mahasiswa" checked>
          </div>
          <div>
            <label for="dosen">Dosen</label>
            <input type="radio" id="dosen" name="category" value="dosen" >
          </div>
        </div>
        <div>
          <label for="name">Nama :</label>
          <input type="text" id="name" name="name">
        </div>
        <div>
          <label for="username">Username :</label>
          <input type="text" id="username" name="username">
        </div>
        <div>
          <label for="email">Email :</label>
          <input type="email" id="email" name="email">
        </div>
        <div id="nip-container" style="display: none;" >
          <label for="nip">NIP :</label>
          <input type="text" id="nip" name="nip">
        </div>
        <div id="nim-container" >
          <label for="nim">NIM :</label>
          <input type="text" id="nim" name="nim">
        </div>
        <div id="class-container" >
          <label for="class">Kelas :</label>
          <input type="text" id="class" name="class">
        </div>
        <div>
          <label for="password">Password :</label>
          <input type="password" id="password" name="password">
        </div>
        <div>
          <label for="password_confirm">Confirm Password :</label>
          <input type="password" id="password_confirm" name="password_confirm">
        </div>
        <button type="submit">Register</button>
    </form>
      
    <script>
        const mahaFields = ['class', 'nim'];
        const dosenFields = ['nip'];
        
        const categoryRadios = document.getElementsByName('category');
        const form = document.getElementById('registration-form');
        
        for (let i = 0; i < categoryRadios.length; i++) {
          categoryRadios[i].addEventListener('change', function() {
            const category = this.value;
            showFields(category);
          });
        }

        form.addEventListener('submit', function(event) {
          event.preventDefault(); // prevent default form submission behavior
          
          if (checkPassword()) {
            // continue with form submission
            form.submit();
          }
        });

        
        function showFields(category) {
          const fieldsToShow = category === 'mahasiswa' ? mahaFields : dosenFields;
          const fieldsToHide = category === 'mahasiswa' ? dosenFields : mahaFields;
          
          fieldsToShow.forEach((field) => {
            document.getElementById(`${field}-container`).style.display = 'flex';
          });
          
          fieldsToHide.forEach((field) => {
            document.getElementById(`${field}-container`).style.display = 'none';
          });
        }
        
        function checkPassword() {
          const password = document.getElementById('password').value;
          const passwordConfirm = document.getElementById('password_confirm').value;
          
          if (password !== passwordConfirm) {
            alert('Password and Confirm Password do not match!');
            return false;
          }
          return true;
        }

    </script>
      
</body>
</html>
